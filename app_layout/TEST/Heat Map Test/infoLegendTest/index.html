<!DOCTYPE html>
<meta charset="utf-8">
<style>

text {
	font: 10px sans-serif;
	text-anchor: middle;
}

</style>
<svg width="1000" height="1000"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
var svg = d3.select("svg");
var width = +svg.attr("width");
var height = +svg.attr("height");
var legendTileSize = 80;
var infoBubblePadding = 15;
var infoBubbleFontSize = "25px";
var legendXTextPadding = -5; // Negative shifts text to the left.
var colors = ["red", "black"];
var index = 0;
var r = 100;
var offset = 100;
var x = r + offset;
var y = height * .15;
button = svg.append("rect")
	.attr("x", 25)
	.attr("y", 25)
	.attr("width", legendTileSize)
	.attr("height", legendTileSize)
	.style("text-anchor", "middle")
	.style("font-size", infoBubbleFontSize)
	.text("test")
	.on("click", function() {
		index += 1;
		moveCircle(offset);
		moveText(offset);
		button.style("fill", colors[index%2]);
	})
function moveCircle(offset)
{
	infoCircle.attr("transform", function(d) {
		var x = d3.select(this)["_groups"][0][0]["transform"]["baseVal"][0]["matrix"]["e"];
		var y = d3.select(this)["_groups"][0][0]["transform"]["baseVal"][0]["matrix"]["f"];
		console.log("---(" + x + "," + y + ")---");
		return "translate(" + (x + offset) + "," + y + ")";
	});
}
function moveText(offset)
{
	objectName.attr("transform", function(d) {
		var x = d3.select(this)["_groups"][0][0]["x"]["baseVal"][0]["value"];
		var y = d3.select(this)["_groups"][0][0]["y"]["baseVal"][0]["value"];
		console.log("(" + x + "," + y + ")");
		return "translate(" + offset + "," + 0 + ")";
	});
	objectValue.attr("transform", function(d) {
		var x = d3.select(this)["_groups"][0][0]["x"]["baseVal"][0]["value"];
		var y = d3.select(this)["_groups"][0][0]["y"]["baseVal"][0]["value"];
		console.log("(" + x + "," + y + ")");
		return "translate(" + offset + "," + 0 + ")";
	});

}
function createInfoLegend(offset)
{
	infoCircle = svg.append("circle")
		.attr("class", "infoCircle")
		.attr("r", r)
		.style("fill", "orange")
		.style("stroke", "black")
		.style("stroke-width", 2)
		.attr("transform", function(d) {
			return "translate(" + x + "," + y + ")";
		});


	objectName = svg.append("text")
		.attr("x", x)
		.attr("y", y)
		.attr("dy", - infoBubblePadding)
		.attr("width", legendTileSize)
		.attr("height", legendTileSize)
		.style("text-anchor", "middle")
		.style("font-size", infoBubbleFontSize)
		.text("test");

	objectValue = svg.append("text")
		.attr("x", x)
		.attr("y", y)
		.attr("dy", infoBubblePadding)
		.attr("width", legendTileSize)
		.attr("height", legendTileSize)
		.style("text-anchor", "middle")
		.style("font-size", infoBubbleFontSize)
		.text("test");
}
createInfoLegend(200);
</script>
