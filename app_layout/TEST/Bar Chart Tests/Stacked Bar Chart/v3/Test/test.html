<!DOCTYPE html>
<meta charset="utf-8">
<style> /* set the CSS */

.bar { fill: steelblue; }

</style>
<body>

	<!-- load the d3.js library -->
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script>
	var xUnit = "";
	var xAxisLabel = "File Space ID" + xUnit;
	var yUnit = "bytes";
	var yAxisLabel = "Actual Size (" + yUnit + ")";
	// set the dimensions and margins of the graph
	var width = 2000;
	var height = 2000;

	// set the ranges
	var x = d3.scaleBand()
	.range([0, width])
	.padding(0.1);
	var y = d3.scaleLinear()
	.range([height, 0]);

	// append the svg object to the body of the page
	// append a 'group' element to 'svg'
	// moves the 'group' element to the top left margin
	var svg = d3.select("body").append("svg")
	.attr("width", width)
	.attr("height", height)
	.append("g")
	.attr("transform",
	"translate(" + 100 + "," + 100 + ")");

	var drag = d3.drag()
	            .on('drag', function() {
					d3.select(this).attr('y', d3.event.y);
				})
				.on("end", function() {
					var legendBars = d3.selectAll(".legendBar")["_groups"][0];
					for(i = 0; i < legendBars.length; i++)
					{
						if(legendBars[i]["y"]["baseVal"]["value"] < d3.select(this).attr('y'))
						{
							legendBars[i]["y"]["baseVal"]["value"] += 120;
						}
						else if(legendBars[i]["y"]["baseVal"]["value"] > d3.select(this).attr('y'))
						{
							legendBars[i]["y"]["baseVal"]["value"] -= 120;
						}
					}
				});

	svg.append("rect")
	.classed('legendBar', true)
	.classed("bar1", true)
	.attr("x", 0)
	.attr("width", 40)
	.attr("y", 0)
	.attr("height", 120)
	.style("fill", "red")
	.call(drag);

	svg.append("rect")
	.classed('legendBar', true)
	.classed("bar2", true)
	.attr("x", 0)
	.attr("width", 40)
	.attr("y", 120)
	.attr("height", 120)
	.style("fill", "cyan")
	.call(drag);

	svg.append("rect")
	.classed('legendBar', true)
	.classed("bar3", true)
	.attr("x", 0)
	.attr("width", 40)
	.attr("y", 240)
	.attr("height", 120)
	.style("fill", "green")
	.call(drag);
</script>
